{
  new CloudifyLicenseVerifier().verifyLicense();
  final String javaHome=System.getenv("JAVA_HOME");
  if (javaHome == null || javaHome.trim().length() == 0) {
    return messages.getString("missing_java_home");
  }
  final boolean javaHomeValid=isJavaHomeValid(javaHome);
  if (!javaHomeValid) {
    return getFormattedMessage("incorrect_java_home",Color.RED,javaHome);
  }
  setSecurityMode();
  if (securityProfile.equalsIgnoreCase(CloudifyConstants.SPRING_PROFILE_SECURE) || securityProfile.equalsIgnoreCase(CloudifyConstants.SPRING_PROFILE_SSL)) {
    copySecurityFiles();
  }
  final LocalhostGridAgentBootstrapper installer=new LocalhostGridAgentBootstrapper();
  installer.setVerbose(verbose);
  installer.setLookupGroups(lookupGroups);
  installer.setNicAddress(nicAddress);
  installer.setProgressInSeconds(DEFAULT_PROGRESS_INTERVAL);
  installer.setWaitForWebui(true);
  installer.addListener(new CLILocalhostBootstrapperListener());
  installer.setAdminFacade((AdminFacade)session.get(Constants.ADMIN_FACADE));
  installer.startLocalCloudOnLocalhostAndWait(securityProfile,username,password,keystorePassword,timeoutInMinutes,TimeUnit.MINUTES);
  return messages.getString("local_cloud_started");
}
