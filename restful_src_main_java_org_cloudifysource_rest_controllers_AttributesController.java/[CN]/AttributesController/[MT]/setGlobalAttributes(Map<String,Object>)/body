{
  if (logger.isLoggable(Level.FINER)) {
    logger.finer("received request to set multiple global attributes");
  }
  GlobalCloudifyAttribute attribute=new GlobalCloudifyAttribute();
  GlobalCloudifyAttribute[] previousAttributesArr=gigaSpace.takeMultiple(attribute);
  final Map<String,Object> previousAttributesMap=new HashMap<String,Object>();
  for (  final GlobalCloudifyAttribute previousAttr : previousAttributesArr) {
    previousAttributesMap.put(previousAttr.getKey(),previousAttr.getValue());
  }
  for (  final Entry<String,Object> attrEntry : attributesMap.entrySet()) {
    GlobalCloudifyAttribute newAttr=new GlobalCloudifyAttribute();
    newAttr.setKey(attrEntry.getKey());
    newAttr.setValue(attrEntry.getValue());
    gigaSpace.write(newAttr);
  }
  return previousAttributesMap;
}
