{
  if (portList == null || portList.isEmpty()) {
    throw new IllegalArgumentException("No port was defined in the configuration file");
  }
  long start=System.currentTimeMillis();
  int openPortsCounter;
  while (System.currentTimeMillis() < start + timeoutInSeconds * 1000) {
    Socket sock=null;
    openPortsCounter=0;
    logger.info("Checking connection to " + hostName + " on ports "+ portList);
    for (    int port : portList) {
      try {
        sock=new Socket();
        sock.connect(new InetSocketAddress(hostName,port));
        sock.close();
        openPortsCounter++;
        logger.fine("Connection to port: " + port + " Succeeded!");
        if (openPortsCounter == portList.size()) {
          return;
        }
      }
 catch (      IOException ioe) {
        logger.fine("Connection to port " + port + " Failed!");
        break;
      }
 finally {
        try {
          sock.close();
        }
 catch (        IOException e) {
        }
      }
    }
    try {
      Thread.sleep(TIMEOUT_BETWEEN_CONNECTION_ATTEMPTS);
    }
 catch (    InterruptedException e) {
    }
  }
}
