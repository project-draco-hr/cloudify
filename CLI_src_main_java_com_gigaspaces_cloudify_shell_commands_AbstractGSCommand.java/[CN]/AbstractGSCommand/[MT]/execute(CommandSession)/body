{
  this.session=session;
  messages=ShellUtils.getMessageBundle();
  try {
    if (adminAware) {
      adminFacade=(AdminFacade)session.get(Constants.ADMIN_FACADE);
      if (!adminFacade.isConnected()) {
        throw new CLIException("not_connected");
      }
    }
    Object result=doExecute();
    return result;
  }
 catch (  CLIException e) {
    if (e.getReasonCode() != null && e.getReasonCode().trim().length() > 0) {
      if (verbose) {
        logger.log(Level.WARNING,getFormattedMessageFromErrorStatusException(e),e);
      }
 else {
        logger.log(Level.WARNING,getFormattedMessageFromErrorStatusException(e));
      }
    }
 else {
      if (!verbose) {
        e.setStackTrace(new StackTraceElement[]{});
      }
      logger.log(Level.WARNING,"",e);
    }
    raiseCloseShellExceptionIfNonInteractive(session,e);
  }
catch (  Throwable e) {
    logger.log(Level.SEVERE,"",e);
    raiseCloseShellExceptionIfNonInteractive(session,e);
  }
  return getFormattedMessage("op_failed",Color.RED,"");
}
