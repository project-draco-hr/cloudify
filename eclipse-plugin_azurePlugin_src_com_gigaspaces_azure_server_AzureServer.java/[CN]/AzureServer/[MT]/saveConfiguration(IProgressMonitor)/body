{
  webserver=AzureServerWizardProperties.getServer();
  IFolder folder=getServer().getServerConfiguration();
  System.out.println("save config " + folder);
  try {
    if (!folder.exists()) {
      folder.create(true,true,monitor);
    }
    if (AzurePlugin.isTestMode) {
      IFolder testFolder=folder.getFolder("test");
      if (!testFolder.exists())       testFolder.create(true,true,monitor);
      testFolder.touch(monitor);
      return;
    }
    AzureRole role=AzureServerWizardProperties.getRole();
    IFolder roleFolder=folder.getFolder(role.getRole());
    if (!roleFolder.exists()) {
      roleFolder.createLink(role.getProject().getProject().getFolder(role.getRole()).getLocationURI(),IResource.ALLOW_MISSING_LOCAL,monitor);
    }
    IServer server=AzureServerWizardProperties.getServer();
    IFile webserverConfigFile=folder.getFile(server.getName() + ".properties");
    if (!webserverConfigFile.exists()) {
      File f=webserverConfigFile.getLocation().toFile();
      f.createNewFile();
      FileUtils.writeStringToFile(f,"location=" + server.getRuntime().getLocation());
    }
    folder.refreshLocal(IResource.DEPTH_INFINITE,monitor);
  }
 catch (  Exception e) {
    throw new CoreException(new Status(IStatus.ERROR,AzurePlugin.PLUGIN_ID,0,NLS.bind("errorCouldNotSaveConfiguration",new String[]{e.getMessage()}),e));
  }
}
