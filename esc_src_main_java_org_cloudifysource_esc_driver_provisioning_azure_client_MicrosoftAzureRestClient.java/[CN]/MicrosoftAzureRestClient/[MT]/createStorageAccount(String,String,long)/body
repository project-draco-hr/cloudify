{
  CreateStorageServiceInput createStorageServiceInput=requestBodyBuilder.buildCreateStorageAccount(affinityGroup,storageAccountName);
  if (storageExists(storageAccountName)) {
    logger.fine("Found an existing storage account : " + storageAccountName);
    return;
  }
  logger.fine("Creating a storage account : " + storageAccountName);
  String xmlRequest=MicrosoftAzureModelUtils.marshall(createStorageServiceInput,false);
  ClientResponse response=doPost("/services/storageservices",xmlRequest);
  String requestId=extractRequestId(response);
  waitForRequestToFinish(requestId,endTime);
  logger.fine("Created a storage account : " + storageAccountName);
}
