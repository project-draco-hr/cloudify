{
  CreateStorageServiceInput createStorageServiceInput=requestBodyBuilder.buildCreateStorageAccount(affinityGroup,storageAccountName);
  if (storageExists(storageAccountName)) {
    logger.fine("Found an existing storage account : " + storageAccountName);
    return;
  }
  String xmlRequest=MicrosoftAzureModelUtils.marshall(createStorageServiceInput,false);
  ClientResponse response=doPost("/" + subscriptionId + "/services/storageservices",xmlRequest);
  String requestId=extractRequestId(response);
  waitForRequestToFinish(requestId,timeout,timeunit);
}
