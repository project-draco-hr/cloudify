{
  final String ssgName=this.securityGroupNames.getServiceName();
  logger.info("Service '" + ssgName + "'is being uninstall.");
  try {
    final Applications applications=this.admin.getApplications();
    final Application application=applications.getApplication(applicationName);
    if (application == null) {
      logger.info("No remaining services in the application.");
      logger.info("Delete the application security group.");
      final String applicationName=this.securityGroupNames.getApplicationName();
      final SecurityGroup secgroup=this.networkApi.getSecurityGroupsByName(applicationName);
      if (secgroup != null) {
        networkApi.deleteSecurityGroup(secgroup.getId());
      }
      if (!this.managementNetworkName.equals(this.applicationNetworkName)) {
        logger.info("Delete the network.");
        try {
          Network appliNetwork=networkApi.getNetworkByName(this.applicationNetworkName);
          if (appliNetwork == null) {
            appliNetwork=networkApi.getNetworkByName(this.securityGroupNames.getPrefix() + this.applicationNetworkName);
          }
          networkApi.deleteNetwork(appliNetwork.getId());
        }
 catch (        final Exception e) {
          logger.warning("Network '" + this.applicationNetworkName + "' was not deleted: "+ e.getMessage());
        }
      }
    }
    logger.info("Clean service's security group :" + ssgName + "*");
    final List<SecurityGroup> securityGroups=this.networkApi.getSecurityGroupsByPrefix(ssgName);
    for (    final SecurityGroup securityGroup : securityGroups) {
      this.networkApi.deleteSecurityGroup(securityGroup.getId());
    }
  }
 catch (  Exception e) {
    logger.log(Level.SEVERE,"Fail to clean security group resources of service " + ssgName,e);
  }
 finally {
    if (this.computeApi != null) {
      this.computeApi.close();
    }
    if (this.networkApi != null) {
      this.networkApi.close();
    }
  }
}
