{
  String serverName=null;
  int attempts=0;
  boolean foundFreeName=false;
  final List<NovaServer> servers=novaApi.getServers();
  final Set<String> existingNames=new HashSet<String>(servers.size());
  for (  final NovaServer sv : servers) {
    existingNames.add(sv.getName());
  }
  while (attempts < MAX_SERVERS_LIMIT) {
    ++attempts;
    serverName=serverNamePrefix + counter.incrementAndGet();
    if (!existingNames.contains(serverName)) {
      foundFreeName=true;
      break;
    }
  }
  if (!foundFreeName) {
    throw new CloudProvisioningException("Number of servers has exceeded allowed server limit (" + MAX_SERVERS_LIMIT + ")");
  }
  return serverName;
}
