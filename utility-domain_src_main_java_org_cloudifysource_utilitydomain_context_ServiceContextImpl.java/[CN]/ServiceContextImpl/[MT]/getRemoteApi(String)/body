{
  ElasticServiceManager elasticServiceManager;
  if (admin != null) {
    elasticServiceManager=admin.getElasticServiceManagers().waitForAtLeastOne();
    Object remoteApi=null;
    remoteApi=((InternalElasticServiceManager)elasticServiceManager).getRemoteApi(ServiceUtils.getAbsolutePUName(applicationName,serviceName),apiName);
    if (logger.isLoggable(Level.FINE)) {
      if (remoteApi == null) {
        logger.fine(apiName + " was not found");
      }
 else {
        logger.fine(apiName + " successfully located");
      }
    }
    if (CloudifyConstants.ESM_STORAGE_API_KEY.equals(apiName)) {
      return new StorageFacadeImpl(this,(RemoteStorageProvisioningDriver)remoteApi);
    }
 else     if (CloudifyConstants.ESM_NETWORK_API_KEY.equals(apiName)) {
      return new NetworkFacadeImpl((RemoteNetworkProvisioningDriver)remoteApi);
    }
  }
  return null;
}
