{
  final long[] allPids=getAllPids();
  final Map<Long,Set<Long>> procTree=createProcessTree(allPids);
  this.childProcessID=findNewChildProcessID(childrenBeforeStart,procTree);
  logger.info("Looking for actual process ID in process tree");
  final List<Long> resultList=new LinkedList<Long>();
  findLeafProcessIDs(this.childProcessID,procTree,resultList);
  if (resultList.size() == 0) {
    throw new USMException("Default process locator was unable to locate service processes. " + "The default implementation can only locate foreground processes. " + "If you are running backgorund processes or OS services, you must set a process locator");
  }
  this.serviceProcesses=resultList;
  checkForConsoleProcess();
}
