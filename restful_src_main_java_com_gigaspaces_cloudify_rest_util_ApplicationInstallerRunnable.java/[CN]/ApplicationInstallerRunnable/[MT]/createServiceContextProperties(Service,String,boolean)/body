{
  final Properties contextProperties=new Properties();
  if (service.getDependsOn() != null) {
    String serviceName=service.getDependsOn().toString();
    serviceName=serviceName.substring(1,serviceName.length() - 1);
    if (serviceName.equals("")) {
      contextProperties.setProperty(CloudifyConstants.CONTEXT_PROPERTY_DEPENDS_ON,"[]");
    }
 else {
      contextProperties.setProperty(CloudifyConstants.CONTEXT_PROPERTY_DEPENDS_ON,"[" + ServiceUtils.getAbsolutePUName(applicationName,serviceName) + "]");
    }
  }
  if (service.getType() != null) {
    contextProperties.setProperty(CloudifyConstants.CONTEXT_PROPERTY_SERVICE_TYPE,service.getType());
  }
  if (service.getIcon() != null) {
    contextProperties.setProperty(CloudifyConstants.CONTEXT_PROPERTY_SERVICE_ICON,service.getIcon());
  }
  if (service.getNetwork() != null) {
    contextProperties.setProperty(CloudifyConstants.CONTEXT_PROPERTY_NETWORK_PROTOCOL_DESCRIPTION,service.getNetwork().getProtocolDescription());
  }
  contextProperties.setProperty(CloudifyConstants.CONTEXT_PROPERTY_ASYNC_INSTALL,Boolean.toString(async));
  return contextProperties;
}
