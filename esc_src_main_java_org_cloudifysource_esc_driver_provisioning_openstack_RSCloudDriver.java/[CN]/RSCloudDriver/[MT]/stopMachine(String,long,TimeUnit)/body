{
  final long endTime=calcEndTimeInMillis(duration,unit);
  if (isStopRequestRecent(ip)) {
    return false;
  }
  final String token=createAuthenticationToken();
  try {
    terminateServerByIp(ip,token,endTime);
    return true;
  }
 catch (  final Exception e) {
    throw new CloudProvisioningException(e);
  }
}
