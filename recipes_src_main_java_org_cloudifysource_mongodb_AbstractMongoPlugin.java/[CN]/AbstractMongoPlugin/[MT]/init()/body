{
  try {
    host=(String)config.get("host");
    if (host == null)     host=DEFAULT_HOST;
    log.info("AbstractMongoPlugin.init: using host " + host);
    int instanseID=serviceContext.getInstanceId();
    log.info("AbstractMongoPlugin.init: InstanceId is " + instanseID);
    port=(Integer)serviceContext.getAttributes().getThisInstance().get("port");
    log.info("AbstractMongoPlugin.init:port is " + port.intValue());
    dbName=(String)config.get("dbName");
    if (dbName == null)     dbName=DEFAULT_DB_NAME;
    log.info("AbstractMongoPlugin.init:Connecting to mongodb " + dbName + "("+ host+ ","+ port+ ")...");
    Mongo mongo=new Mongo(host,port);
    db=mongo.getDB(dbName);
    log.info("AbstractMongoPlugin.init:Connected to mongodb " + dbName);
    initialized=true;
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
