{
  int index=0;
  boolean uniqueNameFound=false;
  File parent=originalRestTempFolder.getParentFile();
  String baseFolderName=originalRestTempFolder.getName();
  String folderName=baseFolderName;
  while (!uniqueNameFound && index < 100) {
    index=index++;
    folderName=baseFolderName + index;
    File restTempFolder=new File(parent,folderName);
    if (!restTempFolder.exists()) {
      uniqueNameFound=true;
    }
 else {
      try {
        FileUtils.deleteDirectory(restTempFolder);
        uniqueNameFound=true;
      }
 catch (      IOException e) {
        logger.warning("failed to delete rest template folder [" + restTempFolder.getAbsolutePath() + "]");
        e.printStackTrace();
      }
    }
  }
  if (!uniqueNameFound) {
    try {
      File tempFile=File.createTempFile(folderName,".tmp");
      folderName=StringUtils.substringBeforeLast(tempFile.getName(),".tmp");
      parent=new File(tempFile.getParent());
      FileUtils.deleteDirectory(tempFile);
    }
 catch (    IOException e) {
      e.printStackTrace();
      throw new RestErrorException(CloudifyMessageKeys.UPLOAD_DIRECTORY_CREATION_FAILED.getName(),e.getMessage());
    }
  }
  return new File(parent,folderName);
}
