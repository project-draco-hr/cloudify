{
  String restTempFolderName="";
  if (!StringUtils.isEmpty(temporaryFolder)) {
    restTempFolderName=temporaryFolder;
  }
 else {
    restTempFolderName=CloudifyConstants.REST_FOLDER;
  }
  File restTempFolder=new File(restTempFolderName);
  if (restTempFolder.exists()) {
    try {
      FileUtils.deleteDirectory(restTempFolder);
    }
 catch (    IOException e) {
      logger.warning("failed to delete rest template folder [" + restTempFolder.getAbsolutePath() + "]");
      e.printStackTrace();
      restTempFolder=getUniqueFolder(restTempFolder);
    }
  }
  restTempFolder.deleteOnExit();
  final boolean mkdirs=restTempFolder.mkdirs();
  final String absolutePath=restTempFolder.getAbsolutePath();
  if (mkdirs) {
    if (logger.isLoggable(Level.INFO)) {
      logger.log(Level.INFO,"created rest temp directory - " + absolutePath);
    }
  }
 else {
    if (logger.isLoggable(Level.WARNING)) {
      logger.warning("failed to create rest temp directory at " + absolutePath);
    }
    throw new RestErrorException(CloudifyMessageKeys.UPLOAD_DIRECTORY_CREATION_FAILED.getName(),absolutePath);
  }
  return restTempFolder;
}
