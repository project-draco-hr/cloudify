{
  logger.info("Initializing cloud configuration");
  config.setGigaSpace(gigaSpace);
  config.setAdmin(admin);
  Cloud cloud=readCloud();
  if (cloud != null) {
    config.setCloud(cloud);
    initCloudTemplates();
    CloudCompute cloudCompute=cloud.getCloudCompute();
    if (cloudCompute.getTemplates().isEmpty()) {
      throw new IllegalArgumentException("No templates defined in cloud configuration!");
    }
    String defaultTemplateName=cloudCompute.getTemplates().keySet().iterator().next();
    logger.info("Setting default template name to: " + defaultTemplateName + ". This template will be used for services that do not specify an explicit template");
    config.setDefaultTemplateName(defaultTemplateName);
    String managementTemplateName=cloud.getConfiguration().getManagementMachineTemplate();
    config.setManagementTemplateName(managementTemplateName);
    config.setManagementTemplate(cloudCompute.getTemplates().get(managementTemplateName));
    File restTempFolder;
    if (!StringUtils.isEmpty(temporaryFolder)) {
      restTempFolder=new File(temporaryFolder);
    }
 else {
      restTempFolder=new File(CloudifyConstants.REST_FOLDER);
    }
    restTempFolder.mkdirs();
    restTempFolder.deleteOnExit();
    config.setRestTempFolder(restTempFolder);
  }
 else {
    logger.info("running in local cloud mode");
  }
}
