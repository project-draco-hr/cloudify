{
  if (!templatesDir.exists()) {
    throw new DSLException(templatesDir + " does not exist.");
  }
  if (!templatesDir.isDirectory()) {
    throw new DSLException(templatesDir + " is not a directory.");
  }
  File[] templateFiles=DSLReader.findDefaultDSLFiles(DSLUtils.TEMPLATES_DSL_FILE_NAME_SUFFIX,templatesDir);
  if (templateFiles == null || templateFiles.length == 0) {
    return new LinkedList<CloudTemplateHolder>();
  }
  Map<String,CloudTemplateHolder> cloudTemplatesMap=new HashMap<String,CloudTemplateHolder>();
  for (  File templateFile : templateFiles) {
    List<CloudTemplateHolder> cloudTemplatesFromFile=readCloudTemplatesFromFile(templateFile);
    for (    CloudTemplateHolder cloudTemplateHolder : cloudTemplatesFromFile) {
      String name=cloudTemplateHolder.getName();
      if (cloudTemplatesMap.containsKey(name)) {
        throw new DSLException("Template with name [" + name + "] already exist in folder ["+ templatesDir+ "]");
      }
      cloudTemplatesMap.put(name,cloudTemplateHolder);
    }
  }
  return new LinkedList<CloudTemplateHolder>(cloudTemplatesMap.values());
}
