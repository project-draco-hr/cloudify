{
  JCloudsDeployer deployer=null;
  try {
    long end=System.currentTimeMillis() + timeoutUnit.toMillis(timeout);
    deployer=getJCloudsDeployer(config);
    NodeMetadata server=null;
    logger.info("Checking if a management server named " + machineTag + " is already running");
    server=deployer.getServerByTag(machineTag);
    if (server != null && server.getState() != NodeState.TERMINATED) {
      throw new CLIException("A server with tag " + machineTag + " already exists");
    }
    return createManagementServers(deployer,machineTag,config,Utils.millisUntil(end),TimeUnit.MILLISECONDS);
  }
 catch (  InstallerException e) {
    throw new CLIException(e);
  }
catch (  IOException e) {
    throw new CLIException(e);
  }
 finally {
    if (deployer != null) {
      deployer.destroy();
    }
  }
}
