{
  if (response.isCommitted()) {
    logger.log(Level.WARNING,"Caught exception, but response already commited. Not sending error message based on exception",e);
  }
 else {
    final Writer writer=response.getWriter();
    final String message="{\"status\":\"error\", \"error\":\"" + e.getMessage() + "\"}";
    logger.log(Level.SEVERE,"caught exception. Sending response message " + message,e);
    writer.write(message);
  }
}
