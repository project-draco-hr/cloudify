{
  List<CloudTemplateHolder> cloudTemplatesHolders;
  logger.log(Level.INFO,"addTemplatesToCloudTempaltesList - Adding templates from " + templatesFolder.getAbsolutePath() + " to cloud at host address "+ hostAddress);
  try {
    cloudTemplatesHolders=ServiceReader.readCloudTemplatesFromDirectory(templatesFolder);
  }
 catch (  DSLException e) {
    logger.log(Level.INFO,"addTemplatesToCloudTempaltesList - DSLException:\n" + "Failed to read templates from directory [" + templatesFolder.getAbsolutePath() + "] at host "+ hostAddress+ " error: "+ e.getMessage()+ ", cause: "+ e.getCause());
    throw new RestErrorException("read_dsl_file_from_folder_failed",templatesFolder.getAbsolutePath(),e.getMessage());
  }
  List<String> addedTemplates=new LinkedList<String>();
  for (  CloudTemplateHolder holder : cloudTemplatesHolders) {
    String name=holder.getName();
    Map<String,CloudTemplate> cloudTemplates=getCloudTemplates();
    if (cloudTemplates.containsKey(name)) {
      logger.log(Level.INFO,"addTemplatesToCloudTempaltesList - template [" + name + "] allready exist. "+ "host: "+ hostAddress+ ", templates folder: "+ templatesFolder.getAbsolutePath());
      throw new RestErrorException("failed_to_add_templates",hostAddress,templatesFolder.getAbsolutePath(),name,templatesFolder.getName(),"templates already exist.");
    }
    cloudTemplates.put(name,holder.getCloudTemplate());
    addedTemplates.add(name);
    additionalTemplateFiles.put(name,holder.getTemplateFileName());
  }
  logger.log(Level.INFO,"addTemplatesInternal - Added templates from folder [" + templatesFolder.getAbsolutePath() + "] to cloud tempaltes list. The templates added: "+ addedTemplates.toString());
  return addedTemplates;
}
