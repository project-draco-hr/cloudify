{
  File localTemplatesFile=copyMultipartFileToLocalFile(templatesFile);
  CloudTemplateHolder[] cloudTemplates=ServiceReader.getCloudTemplatesFromFile(localTemplatesFile);
  List<String> failedToAddTemplates=new LinkedList<String>();
  List<String> addedTemplates=new LinkedList<String>();
  for (  CloudTemplateHolder holder : cloudTemplates) {
    LeaseContext<CloudTemplateHolder> writeResult=gigaSpace.write(holder);
    String name=holder.getName();
    if (writeResult == null) {
      failedToAddTemplates.add(name);
    }
 else {
      addedTemplates.add(name);
    }
  }
  if (!failedToAddTemplates.isEmpty()) {
    throw new RestErrorException("failed_to_add_templates",failedToAddTemplates.toString(),templatesFile.getName());
  }
  return successStatus(addedTemplates);
}
