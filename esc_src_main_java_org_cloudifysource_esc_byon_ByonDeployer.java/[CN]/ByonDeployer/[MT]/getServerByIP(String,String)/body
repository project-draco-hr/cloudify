{
  CustomNode selectedNode=null;
  try {
    for (    final CustomNode node : getAllNodesByTemplateName(templateName)) {
      if (StringUtils.isNotBlank(node.getPrivateIP()) && IPUtils.resolveHostName(node.getPrivateIP()).equalsIgnoreCase(ipAddress) || StringUtils.isNotBlank(node.getPublicIP()) && IPUtils.resolveHostName(node.getPublicIP()).equalsIgnoreCase(ipAddress)) {
        selectedNode=node;
        break;
      }
    }
  }
 catch (  UnknownHostException e) {
    throw new CloudProvisioningException("Failed to resolve a host name",e);
  }
  return selectedNode;
}
