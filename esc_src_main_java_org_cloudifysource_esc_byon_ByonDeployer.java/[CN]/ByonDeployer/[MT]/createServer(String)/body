{
  CustomNode node=null;
  if (org.apache.commons.lang.StringUtils.isBlank(name)) {
    throw new InstallerException("Failed to start cloud node, server name is missing");
  }
  if (freeNodesPool.size() == 0) {
    throw new InstallerException("Failed to create new cloud node, all nodes are currently used");
  }
  node=freeNodesPool.iterator().next();
  ((CustomNodeImpl)node).setNodeName(name);
  freeNodesPool.remove(node);
  if (!allocatedNodesPool.contains(node)) {
    allocatedNodesPool.add(node);
  }
  return node;
}
