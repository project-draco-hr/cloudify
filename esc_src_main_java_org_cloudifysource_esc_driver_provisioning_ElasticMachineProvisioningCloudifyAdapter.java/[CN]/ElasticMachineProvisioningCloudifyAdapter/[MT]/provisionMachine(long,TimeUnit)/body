{
  MachineDetails machineDetails;
  try {
    logger.fine("creating a new admin instance for provisioning");
    AdminFactory factory=new AdminFactory();
    for (    String group : admin.getGroups()) {
      factory.addGroup(group);
    }
    for (    LookupLocator locator : admin.getLocators()) {
      factory.addLocator(locator.getHost() + ":" + locator.getPort());
    }
    provisioningAdmin=factory.createAdmin();
    cloudifyProvisioning.setAdmin(provisioningAdmin);
    machineDetails=cloudifyProvisioning.startMachine(duration,unit);
  }
 catch (  final CloudProvisioningException e) {
    throw new ElasticMachineProvisioningException("Failed to start machine: " + e.getMessage(),e);
  }
  if (machineDetails == null) {
    throw new IllegalStateException("Provisioning provider: " + cloudifyProvisioning.getClass().getName() + " returned null when calling startMachine");
  }
  logger.info("New machine was provisioned. Machine details: " + machineDetails);
  return machineDetails;
}
