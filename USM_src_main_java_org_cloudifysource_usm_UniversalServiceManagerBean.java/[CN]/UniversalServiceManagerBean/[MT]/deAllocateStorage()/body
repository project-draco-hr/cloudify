{
  Service service=getUsmLifecycleBean().getConfiguration().getService();
  final String storageTemplateName=service.getStorage().getTemplate();
  if (StringUtils.isNotBlank(storageTemplateName)) {
    final ServiceVolume serviceVolume=getServiceVolumeFromSpace(getUsmLifecycleBean().getConfiguration().getServiceContext());
    final VolumeState volumeState=serviceVolume.getState();
    final StorageFacade storage=getUsmLifecycleBean().getConfiguration().getServiceContext().getStorage();
    final StorageTemplate storageTemplate=storage.getTemplate(storageTemplateName);
    try {
switch (volumeState) {
case MOUNTED:
{
          storage.unmount(storageTemplate.getDeviceName());
          storage.detachVolume(serviceVolume.getId());
          storage.deleteVolume(serviceVolume.getId());
          break;
        }
case UNMOUNTED:
{
        storage.detachVolume(serviceVolume.getId());
        storage.deleteVolume(serviceVolume.getId());
        break;
      }
case DETACHED:
{
      storage.deleteVolume(serviceVolume.getId());
      break;
    }
case ABSENT:
{
    break;
  }
}
}
 catch (final Exception e) {
if (e instanceof TimeoutException) {
throw (TimeoutException)e;
}
throw new USMException(e);
}
}
}
