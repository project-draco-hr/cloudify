{
  MachineDetails[] servers;
  try {
    servers=provisioning.startManagementMachines(timeout,timeoutUnit);
  }
 catch (  final CloudProvisioningException e) {
    final CLIStatusException cliStatusException=new CLIStatusException(e,CloudifyErrorMessages.CLOUD_API_ERROR.getName(),e.getMessage());
    throw cliStatusException;
  }
catch (  final TimeoutException e) {
    throw new CLIException("Cloudify bootstrap on provider " + this.cloud.getProvider().getProvider() + " timed-out. "+ "Please try to run again using the ???timeout option.",e);
  }
  if (servers.length == 0) {
    throw new IllegalArgumentException("Received zero management servers from provisioning implementation");
  }
  final ComputeTemplate template=this.cloud.getCloudCompute().getTemplates().get(cloud.getConfiguration().getManagementMachineTemplate());
  for (  MachineDetails machineDetails : servers) {
    if (machineDetails.getInstallerConfiguration() == null) {
      machineDetails.setInstallerConfigutation(template.getInstaller());
    }
  }
  return servers;
}
