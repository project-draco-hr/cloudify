{
  final long end=System.currentTimeMillis() + timeoutUnit.toMillis(timeout);
  createProvisioningDriver(false);
  ShellUtils.checkNotNull("providerDirectory",providerDirectory);
  destroyManagementServers(CalcUtils.millisUntil(end),TimeUnit.MILLISECONDS);
  if (StringUtils.isNotBlank(cloud.getConfiguration().getStorageClassName())) {
    createStorageDriver();
    destroyVolumes(CalcUtils.millisUntil(end),TimeUnit.MILLISECONDS);
  }
}
