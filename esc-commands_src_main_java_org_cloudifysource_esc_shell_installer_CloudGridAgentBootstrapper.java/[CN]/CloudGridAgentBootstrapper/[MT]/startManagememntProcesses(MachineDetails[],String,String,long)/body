{
  final AgentlessInstaller installer=new AgentlessInstaller();
  installer.addListener(new CliAgentlessInstallerListener(this.verbose));
  Logger.getLogger(AgentlessInstaller.SSH_LOGGER_NAME).setLevel(Level.parse(cloud.getProvider().getSshLoggingLevel()));
  final ComputeTemplate template=cloud.getTemplates().get(cloud.getConfiguration().getManagementMachineTemplate());
  final int numOfManagementMachines=machines.length;
  final InstallationDetails[] installations=createInstallationDetails(numOfManagementMachines,machines,template,securityProfile,keystorePassword);
  int i=isNoWebServices() ? 0 : 1;
  for (; i < installations.length; i++) {
    installations[i].setNoWebServices(true);
  }
  final String lookup=createLocatorsString(installations);
  for (  final InstallationDetails detail : installations) {
    detail.setLocator(lookup);
  }
  installOnMachines(endTime,installer,numOfManagementMachines,installations);
  return machines;
}
