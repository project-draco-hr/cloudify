{
  createConditionLatch(timeout,timeunit).waitFor(new ConditionLatch.Predicate(){
    @Override public boolean isDone() throws CLIException, InterruptedException {
      final Collection<String> applications=adminFacade.getApplicationsNamesAndAuthGroups().values();
      boolean done=true;
      for (      final String application : applications) {
        if (!MANAGEMENT_APPLICATION.equals(application)) {
          done=false;
          break;
        }
      }
      if (!done) {
        logger.info("Waiting for all applications to uninstall");
      }
      return done;
    }
  }
);
}
