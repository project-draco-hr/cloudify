{
  createConditionLatch(timeout,timeunit).waitFor(new ConditionLatch.Predicate(){
    @Override public boolean isDone() throws CLIException, InterruptedException {
      List<String> applications=adminFacade.getApplicationsList();
      boolean done=true;
      for (      String applicationName : applications) {
        if (!MANAGEMENT_APPLICATION.equals(applicationName)) {
          done=false;
          break;
        }
      }
      if (!done) {
        logger.info("Waiting for all applications to uninstall");
      }
      return done;
    }
  }
);
}
