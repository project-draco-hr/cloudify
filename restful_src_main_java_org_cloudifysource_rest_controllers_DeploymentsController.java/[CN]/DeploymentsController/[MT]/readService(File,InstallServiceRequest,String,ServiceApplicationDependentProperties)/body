{
  Service service;
  try {
    DSLServiceCompilationResult result;
    if (request.getServiceFileName() != null) {
      result=ServiceReader.getServiceFromFile(new File(workingProjectDir,request.getServiceFileName()),workingProjectDir);
    }
 else {
      result=ServiceReader.getServiceFromDirectory(workingProjectDir);
    }
    service=result.getService();
    if (serviceProps != null) {
      service.setDependsOn(serviceProps.getDependsOn());
    }
  }
 catch (  final Exception e) {
    throw new RestErrorException(CloudifyMessageKeys.FAILED_TO_READ_SERVICE.getName(),absolutePuName);
  }
  return service;
}
