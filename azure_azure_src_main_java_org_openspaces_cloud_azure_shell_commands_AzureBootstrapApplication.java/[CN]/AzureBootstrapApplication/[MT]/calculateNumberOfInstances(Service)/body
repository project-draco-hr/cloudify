{
  int numberOfInstances;
  if (service.getDataGrid() != null) {
    Sla sla=service.getDataGrid().getSla();
    numberOfInstances=sla.getHighlyAvailable() ? 2 : 1;
    logger.fine("Service " + service.getName() + " is a datagrid. Starting "+ numberOfInstances+ " instances");
  }
 else   if (service.getStatefulProcessingUnit() != null) {
    Sla sla=service.getStatefulProcessingUnit().getSla();
    numberOfInstances=sla.getHighlyAvailable() ? 2 : 1;
    logger.fine("Service " + service.getName() + " is a stateful processing unit. Starting "+ numberOfInstances+ " instances");
  }
 else   if (service.getStatelessProcessingUnit() != null) {
    numberOfInstances=service.getNumInstances();
    logger.fine("Service " + service.getName() + " is a stateless processing unit. Starting "+ numberOfInstances+ " instances");
  }
 else {
    numberOfInstances=service.getNumInstances();
    logger.fine("Starting " + numberOfInstances + " instances for service "+ service.getName());
  }
  return numberOfInstances;
}
