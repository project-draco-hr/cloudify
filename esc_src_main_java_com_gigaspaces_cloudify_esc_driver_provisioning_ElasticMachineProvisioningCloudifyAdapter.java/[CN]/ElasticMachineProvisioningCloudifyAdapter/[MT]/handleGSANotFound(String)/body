{
  logger.severe("Failed to look up Grid Service Agent on machine with IP: " + machineIp + ". Attempting to shut it down !");
  boolean shutdownResult=false;
  try {
    shutdownResult=this.cloudifyProvisioning.stopMachine(machineIp);
  }
 catch (  CloudProvisioningException e) {
    logger.log(Level.SEVERE,"During scale out, a new machine with IP: " + machineIp + " was provisioned, but a Cloudfiy Agent was not available on it. "+ "Attempt to shut down the machine has failed with the following error: "+ e.getMessage()+ ". Contact Cloud Adminisrator to manuall shut down this machine",e);
  }
  if (!shutdownResult) {
    final String msg="During scale out, a new machine with IP: " + machineIp + " was provisioned, but a Cloudfiy Agent was not available on it. "+ "Attempt to shut down the machine has also failed. This machine may be leaking, "+ "and should be shut down manually by the cloud administrator";
    logger.severe(msg);
    throw new ElasticMachineProvisioningException(msg);
  }
 else {
    final String msg="During scale out, a new machine with IP: " + machineIp + " was provisioned, but a Cloudfiy Agent was not available on it. "+ "Attempt to shut down the machine was successful. "+ "A new provisioning attempt will be attempted automatically. "+ "If the problem repeats, contact your cloud administrator";
    logger.severe(msg);
    throw new ElasticMachineProvisioningException(msg);
  }
}
