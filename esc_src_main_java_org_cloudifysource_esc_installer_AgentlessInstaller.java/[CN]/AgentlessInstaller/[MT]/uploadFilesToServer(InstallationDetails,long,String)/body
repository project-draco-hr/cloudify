{
  try {
    final Set<String> excludedFiles=new HashSet<String>();
    if (!details.isLus() && details.getManagementOnlyFiles() != null) {
      excludedFiles.addAll(Arrays.asList(details.getManagementOnlyFiles()));
    }
    copyFiles(details,targetHost,excludedFiles,Utils.millisUntil(end),TimeUnit.MILLISECONDS);
  }
 catch (  final FileSystemException e) {
    throw new InstallerException("Uploading files to remote server failed.",e);
  }
catch (  final IOException e) {
    throw new InstallerException("Uploading files to remote server failed.",e);
  }
catch (  final URISyntaxException e) {
    throw new InstallerException("Uploading files to remote server failed.",e);
  }
}
