{
  if (this.groovyCommandLinePrefixParams != null) {
    return;
  }
  final String home=Environment.getHomeDirectory();
  final File homeDir=new File(home);
  final String groovyPath=createGroovyPath(homeDir);
  final StringBuilder sb=new StringBuilder();
  final List<File> jars=getJarFilesForGroovyClasspath(homeDir,workingDir);
  if (jars != null) {
    for (    final File jar : jars) {
      sb.append(jar.getAbsolutePath()).append(File.pathSeparator);
    }
  }
  final ArrayList<String> groovyCommandParams=new ArrayList<String>();
  groovyCommandParams.add(groovyPath);
  if (ServiceUtils.isWindows()) {
    modifyWindowsCommandLine(groovyCommandParams,workingDir);
  }
  if (StringUtils.isNotBlank(System.getenv("RMI_OPTIONS"))) {
    groovyCommandParams.add(System.getenv("RMI_OPTIONS"));
  }
  if (StringUtils.isNotBlank(System.getenv("LOOKUP_GROUPS_PROP"))) {
    groovyCommandParams.add(System.getenv("LOOKUP_GROUPS_PROP"));
  }
  if (StringUtils.isNotBlank(System.getenv("LOOKUP_LOCATORS_PROP"))) {
    groovyCommandParams.add(System.getenv("LOOKUP_LOCATORS_PROP"));
  }
  if (StringUtils.isNotBlank(System.getenv("GS_LOGGING_CONFIG_FILE_PROP"))) {
    groovyCommandParams.add(System.getenv("GS_LOGGING_CONFIG_FILE_PROP"));
  }
  String classPathEnv=System.getenv("CLASSPATH");
  if (classPathEnv == null) {
    classPathEnv="";
  }
  classPathEnv=classPathEnv + File.pathSeparator + sb.toString();
  logger.info("Setting ClassPath environment variable for child processes to: " + classPathEnv);
  this.groovyEnvironmentClassPath=classPathEnv;
  this.groovyCommandLinePrefixParams=groovyCommandParams;
}
