{
  final long endTime=System.currentTimeMillis() + unit.toMillis(timeout);
  NodeMetadata server;
  while (true) {
    server=deployer.getServerByID(serverId);
    if (server != null && server.getState() == NodeState.RUNNING) {
      break;
    }
    if (System.currentTimeMillis() > endTime) {
      throw new TimeoutException("Server [ " + serverId + " ] has been starting up for more more than "+ TimeUnit.MINUTES.convert(WAIT_TIMEOUT_MILLIS,TimeUnit.MILLISECONDS)+ " minutes!");
    }
    if (logger.isLoggable(Level.FINE)) {
      final String serverName=server != null ? server.getState().name() : serverId;
      logger.fine("Server Status (" + serverName + ") still not active, please wait...");
    }
    Thread.sleep(WAIT_THREAD_SLEEP_MILLIS);
  }
}
