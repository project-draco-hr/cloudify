{
  DefaultHttpClient httpClient=new DefaultHttpClient();
  String effectiveUrl=cloudifyUrl;
  if (!effectiveUrl.endsWith(".zip") && !effectiveUrl.endsWith(".tar.gz")) {
    effectiveUrl+=".zip";
  }
  HttpHead httpMethod=new HttpHead(effectiveUrl);
  try {
    publishOngoingEvent(CloudifyErrorMessages.EVENT_VALIDATING_CLOUDIFY_URL.getName(),effectiveUrl);
    HttpResponse response=httpClient.execute(httpMethod);
    if (response.getStatusLine().getStatusCode() != HttpStatus.SC_OK) {
      publishEventEnd(" [Error] Provider not supported: ");
      throw new CloudProvisioningException("Invalid cloudify URL: " + effectiveUrl);
    }
    publishEventEnd(VALIDATION_SUCCESS_MESSAGE);
  }
 catch (  ClientProtocolException e) {
    System.out.println("Failed to validate Cloudify URL: " + effectiveUrl);
    logger.info("Failed to validate Cloudify URL: " + effectiveUrl);
    e.printStackTrace();
  }
catch (  IOException e) {
    System.out.println("Failed to validate Cloudify URL: " + effectiveUrl);
    logger.info("Failed to validate Cloudify URL: " + effectiveUrl);
    e.printStackTrace();
  }
}
