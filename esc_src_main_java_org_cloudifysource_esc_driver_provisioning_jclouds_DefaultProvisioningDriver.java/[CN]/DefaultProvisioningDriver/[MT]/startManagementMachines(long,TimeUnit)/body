{
  if (duration < 0) {
    throw new TimeoutException("Starting a new machine timed out");
  }
  final long endTime=System.currentTimeMillis() + unit.toMillis(duration);
  logger.fine("DefaultCloudProvisioning: startMachine - management == " + management);
  final String managementMachinePrefix=this.serverNamePrefix;
  final MachineDetails[] existingManagementServers=getExistingManagementServers(managementMachinePrefix);
  if (existingManagementServers.length > 0) {
    logger.info("Found existing servers matching the name: " + managementMachinePrefix);
    for (    MachineDetails machineDetails : existingManagementServers) {
      final String existingManagementServerDescription=createManagementServerDescription(machineDetails);
      logger.info(existingManagementServerDescription);
    }
    return existingManagementServers;
  }
  publishEvent(EVENT_ATTEMPT_START_MGMT_VMS);
  final int numberOfManagementMachines=this.cloud.getProvider().getNumberOfManagementMachines();
  final MachineDetails[] createdMachines=doStartManagementMachines(endTime,numberOfManagementMachines);
  publishEvent(EVENT_MGMT_VMS_STARTED);
  return createdMachines;
}
