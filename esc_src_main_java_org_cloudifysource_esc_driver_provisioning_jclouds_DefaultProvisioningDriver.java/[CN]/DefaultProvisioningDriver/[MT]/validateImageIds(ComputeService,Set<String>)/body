{
  publishEvent(CloudifyErrorMessages.EVENT_VALIDATING_IMAGES.getName());
  Set<String> missingImageIds=new HashSet<String>();
  for (  String imageId : usedImageIds) {
    try {
      computeService.getImage(imageId);
    }
 catch (    IllegalArgumentException e) {
      missingImageIds.add(imageId);
    }
  }
  if (!missingImageIds.isEmpty()) {
    if (missingImageIds.size() == 1) {
      throw new CloudProvisioningException("Invalid image ID: " + missingImageIds.iterator().next());
    }
 else {
      throw new CloudProvisioningException("Invalid image IDs: " + Arrays.toString(missingImageIds.toArray()));
    }
  }
}
