{
  publishEvent(CloudifyErrorMessages.EVENT_VALIDATING_LOCATIONS.getName());
  Set<String> supportedLocationIds=new HashSet<String>();
  for (  Location location : supportedLocations) {
    supportedLocationIds.add(location.getId());
  }
  Set<String> missingLocationIds=new HashSet<String>(usedLocationIds);
  missingLocationIds.removeAll(supportedLocationIds);
  if (!missingLocationIds.isEmpty()) {
    if (missingLocationIds.size() == 1) {
      throw new CloudProvisioningException("Invalid location ID: " + missingLocationIds.iterator().next());
    }
 else {
      throw new CloudProvisioningException("Invalid location IDs: " + Arrays.toString(missingLocationIds.toArray()));
    }
  }
}
