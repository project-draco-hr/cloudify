{
  String providerName=cloud.getProvider().getProvider();
  publishEvent(CloudifyErrorMessages.EVENT_VALIDATING_PROVIDER_OR_API_NAME.getName(),providerName);
  String apiId;
  boolean endpointRequired=false;
  try {
    ProviderMetadata providerMetadata=Providers.withId(providerName);
    ApiMetadata apiMetadata=providerMetadata.getApiMetadata();
    apiId=apiMetadata.getId();
  }
 catch (  NoSuchElementException e) {
    try {
      ApiMetadata apiMetadata=Apis.withId(providerName);
      apiId=apiMetadata.getId();
      endpointRequired=true;
    }
 catch (    NoSuchElementException ex) {
      throw new CloudProvisioningException("Provider not supported: " + providerName,ex);
    }
  }
  validateCloudifyUrl(cloud.getProvider().getCloudifyUrl());
  validateComputeTemplates(endpointRequired,apiId);
}
