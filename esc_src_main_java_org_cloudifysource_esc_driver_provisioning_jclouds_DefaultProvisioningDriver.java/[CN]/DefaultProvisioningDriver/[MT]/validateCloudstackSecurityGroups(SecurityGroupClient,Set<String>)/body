{
  Set<String> missingSecurityGroups=new HashSet<String>();
  for (  String securityGroupName : securityGroups) {
    if (securityGroupClient.getSecurityGroup(securityGroupName) == null) {
      missingSecurityGroups.add(securityGroupName);
    }
  }
  if (missingSecurityGroups.size() == 1) {
    throw new CloudProvisioningException("Invalid security group name: " + missingSecurityGroups.iterator().next());
  }
 else   if (missingSecurityGroups.size() > 1) {
    throw new CloudProvisioningException("Invalid security group names: " + Arrays.toString(missingSecurityGroups.toArray()));
  }
}
