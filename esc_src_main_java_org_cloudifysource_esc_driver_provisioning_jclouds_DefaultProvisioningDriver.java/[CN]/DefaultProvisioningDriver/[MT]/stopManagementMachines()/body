{
  initDeployer(this.cloud);
  final MachineDetails[] managementServers=getExistingManagementServers();
  if (managementServers.length == 0) {
    throw new CloudProvisioningException("Could not find any management machines for this cloud (management machine prefix is: " + this.serverNamePrefix + ")");
  }
  final Set<String> machineIps=new HashSet<String>();
  for (  final MachineDetails machineDetails : managementServers) {
    machineIps.add(machineDetails.getPrivateAddress());
  }
  try {
    this.deployer.shutdownMachinesByIds(managementServers,stopManagementMachinesTimeoutInMinutes);
  }
 catch (  final InterruptedException e) {
    throw new CloudProvisioningException(e);
  }
}
