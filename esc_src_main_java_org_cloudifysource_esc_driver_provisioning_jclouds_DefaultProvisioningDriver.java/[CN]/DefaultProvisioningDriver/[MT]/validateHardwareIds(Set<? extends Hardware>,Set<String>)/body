{
  publishEvent(CloudifyErrorMessages.EVENT_VALIDATING_HARDWARE_PROFILES.getName());
  Set<String> supportedHardwareIds=new HashSet<String>();
  for (  Hardware hardware : supportedHardwareProfiles) {
    supportedHardwareIds.add(hardware.getId());
  }
  Set<String> missingHardwareIds=new HashSet<String>(usedHardwareIds);
  missingHardwareIds.removeAll(supportedHardwareIds);
  if (!missingHardwareIds.isEmpty()) {
    if (missingHardwareIds.size() == 1) {
      throw new CloudProvisioningException("Invalid hardware ID: " + missingHardwareIds.iterator().next());
    }
 else {
      throw new CloudProvisioningException("Invalid hardware IDs: " + Arrays.toString(missingHardwareIds.toArray()));
    }
  }
}
