{
  if (!askUninstallConfirmationQuestion()) {
    return getFormattedMessage("uninstall_aborted");
  }
  final Set<String> containerIdsOfApplication=((RestAdminFacade)adminFacade).getGridServiceContainerUidsForApplication(applicationName);
  if (verbose) {
    logger.info("Containers running PUs of application " + applicationName + ":"+ containerIdsOfApplication);
  }
  Map<String,String> uninstallApplicationResponse=this.adminFacade.uninstallApplication(this.applicationName,timeoutInMinutes);
  if (uninstallApplicationResponse.containsKey(CloudifyConstants.LIFECYCLE_EVENT_CONTAINER_ID)) {
    String pollingID=uninstallApplicationResponse.get(CloudifyConstants.LIFECYCLE_EVENT_CONTAINER_ID);
    boolean waitForLifecycleEvents=this.adminFacade.waitForLifecycleEvents(pollingID,timeoutInMinutes);
    if (!waitForLifecycleEvents) {
      throw new TimeoutException(TIMEOUT_ERROR_MESSAGE);
    }
  }
 else {
    throw new CLIException("Failed to retrieve lifecycle logs from rest. " + "Check logs for more details.");
  }
  session.put(Constants.ACTIVE_APP,"default");
  GigaShellMain.getInstance().setCurrentApplicationName("default");
  return getFormattedMessage("application_uninstalled_succesfully",this.applicationName);
}
