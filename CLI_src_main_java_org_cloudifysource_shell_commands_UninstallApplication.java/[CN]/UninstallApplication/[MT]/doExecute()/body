{
  if (!askUninstallConfirmationQuestion()) {
    return getFormattedMessage("uninstall_aborted");
  }
  final Set<String> containerIdsOfApplication=((RestAdminFacade)adminFacade).getGridServiceContainerUidsForApplication(applicationName);
  if (verbose) {
    logger.info("Containers running PUs of application " + applicationName + ":"+ containerIdsOfApplication);
  }
  if (timeoutInMinutes > 0) {
    printStatusMessage(containerIdsOfApplication.size(),containerIdsOfApplication.size(),containerIdsOfApplication);
  }
  this.adminFacade.uninstallApplication(this.applicationName);
  if (timeoutInMinutes > 0) {
    createConditionLatch(timeoutInMinutes,TimeUnit.MINUTES).waitFor(new Predicate(){
      /** 
 * {@inheritDoc}
 */
      @Override public boolean isDone() throws CLIException {
        final Set<String> allContainerIds=((RestAdminFacade)adminFacade).getGridServiceContainerUids();
        final Set<String> remainingContainersForApplication=new HashSet<String>(containerIdsOfApplication);
        remainingContainersForApplication.retainAll(allContainerIds);
        final boolean isDone=remainingContainersForApplication.isEmpty();
        if (!isDone) {
          printStatusMessage(remainingContainersForApplication.size(),containerIdsOfApplication.size(),remainingContainersForApplication);
        }
        return isDone;
      }
    }
);
  }
  session.put(Constants.ACTIVE_APP,"default");
  GigaShellMain.getInstance().setCurrentApplicationName("default");
  return getFormattedMessage("application_uninstalled_succesfully",this.applicationName);
}
