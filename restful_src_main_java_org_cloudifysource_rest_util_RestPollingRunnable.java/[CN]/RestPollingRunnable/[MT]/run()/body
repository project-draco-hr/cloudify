{
  try {
    if (this.serviceNames.isEmpty()) {
      logger.log(Level.INFO,"Polling for lifecycle events has ended successfully." + " Terminating the polling task");
      throw new RestServiceException("Polling has ended successfully");
    }
    if (System.currentTimeMillis() > this.endTime) {
      throw new TimeoutException("Timed out");
    }
    pollForLogs();
  }
 catch (  final Throwable e) {
    terminateTaskGracefully();
    if (!(e instanceof RestServiceException)) {
      logger.log(Level.INFO,"Polling task ended unexpectedly. Reason: " + e.getMessage(),e);
      setExecutionException(e);
    }
 else {
      logger.log(Level.INFO,"Polling task ended successfully.");
    }
    throw new RuntimeException(e);
  }
}
