{
  DSLObjectInitializerData data=getDSLInitializers().get(name);
  if (data == null) {
    return null;
  }
  if (this.activeObject == null) {
    if (!data.isAllowRootNode()) {
      throw new DSLException("Elements of  type " + name + " may not be used as the root node of a DSL");
    }
  }
 else {
    if (data.isAllowInternalNode()) {
      if (data.getParentElement() != null && data.getParentElement().length() > 0) {
        DSLObjectInitializerData parentType=getDSLInitializers().get(data.getParentElement());
        if (parentType == null) {
          throw new IllegalStateException("The DSL type " + name + " has a declared parent type of "+ data.getParentElement()+ " which is not a known type. This should not happen.");
        }
        if (!parentType.getClazz().isAssignableFrom(this.activeObject.getClass())) {
          throw new DSLException("The type: " + name + " may only be nested under elements of type "+ parentType.getName());
        }
      }
    }
 else {
      throw new DSLException("Elements of type: " + name + " may not be placed in internal nodes");
    }
  }
  try {
    if (this.activeObject != null && isProperyExistsInBean(this.activeObject,name)) {
      Object existingPropertyValue=PropertyUtils.getProperty(this.activeObject,name);
      if (existingPropertyValue != null)       return BeanUtils.cloneBean(existingPropertyValue);
    }
    return data.clazz.newInstance();
  }
 catch (  InstantiationException e) {
    throw new DSLException("Failed to create new element of type " + data.getName() + " with class: "+ data.clazz,e);
  }
catch (  IllegalAccessException e) {
    throw new DSLException("Failed to create new element of type " + data.getName() + " with class: "+ data.clazz,e);
  }
catch (  InvocationTargetException e) {
    throw new DSLException("Failed to copy existing element of type " + data.getName() + " with class: "+ data.clazz,e);
  }
catch (  NoSuchMethodException e) {
    throw new DSLException("Failed to copy existing element of type " + data.getName() + " with class: "+ data.clazz,e);
  }
}
