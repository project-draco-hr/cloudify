{
  if (!askUninstallConfirmationQuestion()) {
    return getFormattedMessage("uninstall_aborted");
  }
  final Set<String> containerIdsOfService=((RestAdminFacade)adminFacade).getGridServiceContainerUidsForService(getCurrentApplicationName(),serviceName);
  if (verbose) {
    logger.info("Found containers: " + containerIdsOfService);
  }
  Map<String,String> undeployServiceResponse=adminFacade.undeploy(getCurrentApplicationName(),serviceName,timeoutInMinutes);
  if (undeployServiceResponse.containsKey(CloudifyConstants.LIFECYCLE_EVENT_CONTAINER_ID)) {
    String pollingID=undeployServiceResponse.get(CloudifyConstants.LIFECYCLE_EVENT_CONTAINER_ID);
    this.adminFacade.waitForLifecycleEvents(pollingID,timeoutInMinutes,TIMEOUT_ERROR_MESSAGE);
  }
 else {
    throw new CLIException("Failed to retrieve lifecycle logs from rest. " + "Check logs for more details.");
  }
  return getFormattedMessage("undeployed_successfully",serviceName);
}
