{
  try {
    deployer=(ByonDeployer)context.getOrCreate("UNIQUE_BYON_DEPLOYER_ID",new Callable<Object>(){
      @SuppressWarnings("unchecked") @Override public Object call() throws Exception {
        logger.info("Creating BYON context deployer for cloud: " + cloud.getName());
        final ByonDeployer newDeployer=new ByonDeployer();
        addTempaltesToDeployer(newDeployer,cloud.getTemplates());
        return newDeployer;
      }
    }
);
  }
 catch (  final Exception e) {
    publishEvent("connection_to_cloud_api_failed",cloud.getProvider().getProvider());
    throw new IllegalStateException("Failed to create cloud deployer",e);
  }
  try {
    updateDeployerTemplates(cloud);
  }
 catch (  Exception e) {
    logger.log(Level.WARNING,"initDeployer - fialed to add tempaltes to deployer",e);
    throw new IllegalStateException("Failed to update templates",e);
  }
  setCustomSettings(cloud);
}
