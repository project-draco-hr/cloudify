{
  logger.info("addTemplatesToDeployer - adding the following templates to the deployer: " + templatesMap.keySet());
  List<Map<String,String>> nodesList=null;
  for (  final String templateName : templatesMap.keySet()) {
    final Map<String,Object> customSettings=cloud.getTemplates().get(templateName).getCustom();
    if (customSettings != null) {
      nodesList=(List<Map<String,String>>)customSettings.get(CLOUD_NODES_LIST);
    }
    if (nodesList == null) {
      publishEvent(CloudifyErrorMessages.MISSING_NODES_LIST.getName(),templateName);
      throw new CloudProvisioningException("Failed to create BYON cloud deployer, invalid configuration for template " + templateName + " - missing nodes list.");
    }
    deployer.addNodesList(templateName,templatesMap.get(templateName),nodesList);
  }
}
