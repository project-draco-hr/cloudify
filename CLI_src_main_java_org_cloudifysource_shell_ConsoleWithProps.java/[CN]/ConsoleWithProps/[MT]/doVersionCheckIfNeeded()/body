{
  long lastAskedTS=getLastTimeAskedAboutVersionCheck();
  try {
    if (lastAskedTS <= (System.currentTimeMillis() - TWO_WEEKS_IN_MILLIS) && ShellUtils.promptUser(session,"version_check_confirmation")) {
      session.getConsole().println("Checking version...");
      String currentBuildStr=PlatformVersion.getBuildNumber();
      if (currentBuildStr.contains("-")) {
        currentBuildStr=currentBuildStr.substring(0,currentBuildStr.indexOf("-"));
      }
      int currentVersion=Integer.parseInt(currentBuildStr);
      int latestBuild=getLatestBuildNumber(currentVersion);
      String message;
      if (latestBuild == -1) {
        message=ShellUtils.getFormattedMessage("could_not_get_version");
      }
 else       if (latestBuild > currentVersion) {
        message=ShellUtils.getFormattedMessage("newer_version_exists");
      }
 else {
        message=ShellUtils.getFormattedMessage("version_up_to_date");
      }
      registerVersionCheck();
      session.getConsole().println(message);
      session.getConsole().println();
    }
  }
 catch (  IOException e) {
    logger.log(Level.FINE,"Failed to prompt user",e);
  }
}
